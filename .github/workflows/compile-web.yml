name: Auto-compiled builds (Web)

on:
        push:
                branches-ignore: [randomBranchName]
        pull_request:
                branches-ignore: [randomBranchName]
        workflow_dispatch:

jobs:
        buildWeb:
                runs-on: windows-latest

                steps:
                        - uses: actions/checkout@main

                        - uses: krdlab/setup-haxe@master
                          with:
                                  haxe-version: 4.3.7
                        - name: Installing Libraries
                          run: haxe --interp -cp ./actions/libs-installer -D analyzer-optimize -main Main
                        - name: Create Version Tag
                          run: echo "${{github.run_id}}" > VERSION

                        - name: Compile
                          run: haxelib run lime build html5
                        - name: Publish Artifact
                          uses: actions/upload-artifact@main
                          with:
                                  name: webBuild
                                  path: export/release/html5/bin